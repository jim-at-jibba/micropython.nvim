*micropython.nvim.txt*       For NVIM v0.9.0      Last change: 2025 January 01

==============================================================================
Table of Contents                         *micropython.nvim-table-of-contents*

1. micropython_nvim                        |micropython.nvim-micropython_nvim|
  - Introduction              |micropython.nvim-micropython_nvim-introduction|
  - Goals                            |micropython.nvim-micropython_nvim-goals|
  - Features                      |micropython.nvim-micropython_nvim-features|
  - Requirements              |micropython.nvim-micropython_nvim-requirements|
  - Quickstart                  |micropython.nvim-micropython_nvim-quickstart|
  - Installation              |micropython.nvim-micropython_nvim-installation|
  - Usage                            |micropython.nvim-micropython_nvim-usage|
  - Project Setup            |micropython.nvim-micropython_nvim-project-setup|
  - Migration                    |micropython.nvim-micropython_nvim-migration|

==============================================================================
1. micropython_nvim                        *micropython.nvim-micropython_nvim*


INTRODUCTION                  *micropython.nvim-micropython_nvim-introduction*

micropython_nvim is a plugin that aims to make it easier and more enjoyable to
work on MicroPython projects in Neovim. It uses mpremote, the official
MicroPython remote control tool.

See the |micropython.nvim-quickstart| section to get started.

If you open an existing project that has a `.micropython` configuration file
in the root directory, the plugin will automatically configure the port and
baud rate for you.

**IMPORTANT** This plugin assumes you are opening Neovim at the root of the
project. Some commands will not behave in the expected way if you choose not
to do this.


GOALS                                *micropython.nvim-micropython_nvim-goals*

- Run and upload python files directly to your micro-controller from Neovim
- Easy multi-file project support with recursive directory upload
- Live development with filesystem mounting
- General file management on device
- Easy management of port, baudrate, and other settings
- Easy project environment setup
- Built-in REPL access


FEATURES                          *micropython.nvim-micropython_nvim-features*

- **Run** local python files on your micro-controller
- **Upload** local python files (including recursive directory upload)
- **Sync** mount local directory for live development without uploading
- **REPL** access via mpremote
- **File management** - list, delete files on device
- **Device management** - list connected devices, reset
- **Project initialization**


REQUIREMENTS                  *micropython.nvim-micropython_nvim-requirements*

- Neovim >= 0.9 <https://github.com/neovim/neovim/releases/tag/v0.9.0>
- toggleterm.nvim <https://github.com/akinsho/toggleterm.nvim>
- dressing.nvim <https://github.com/stevearc/dressing.nvim> (optional)
- mpremote <https://docs.micropython.org/en/latest/reference/mpremote.html>

Install mpremote: >bash
    pip install mpremote
<


QUICKSTART                      *micropython.nvim-micropython_nvim-quickstart*

- Install micropython_nvim using your preferred package manager
- Add a keybind to `run` function

>lua
    vim.keymap.set("n", "<leader>mr", require("micropython_nvim").run)
<

- Follow the |micropython.nvim-project-setup| steps to create the necessary
  files for a new project.

**Next steps**

- Add a |micropython.nvim-statusline-component|
- See the examples/ directory for multi-file project examples


INSTALLATION                  *micropython.nvim-micropython_nvim-installation*

lazy.nvim ~

>lua
    {
        "jim-at-jibba/micropython.nvim",
        dependencies = { "akinsho/toggleterm.nvim", "stevearc/dressing.nvim" },
    }
<

packer ~

>lua
    use {
        "jim-at-jibba/micropython.nvim",
        requires = { "akinsho/toggleterm.nvim", "stevearc/dressing.nvim" },
    }
<


USAGE                                *micropython.nvim-micropython_nvim-usage*

Core Commands ~

- `:MPRun` - Run current buffer on the micro-controller
- `:MPRunMain` - Run main.py on the device
- `:MPUpload` - Upload current buffer to the micro-controller
- `:MPUploadAll` - Upload all project files (recursive)
- `:MPRepl` - Open MicroPython REPL

Development Commands ~

- `:MPSync` - Mount local directory on device for live development
- `:MPReset` - Soft reset the device
- `:MPHardReset` - Hard reset the device

File Management ~

- `:MPListFiles` - List files on device
- `:MPEraseOne` - Delete single file or folder from device
- `:MPEraseAll` - Delete all files from device

Setup Commands ~

- `:MPInit` - Initialize MicroPython project
- `:MPSetPort` - Set the device port
- `:MPSetBaud` - Set the baud rate (optional, mpremote auto-detects)
- `:MPSetStubs` - Set MicroPython stubs for your board
- `:MPListDevices` - List connected MicroPython devices

Upload Ignore List ~

`:MPUploadAll` accepts file or folder names to ignore:
`:MPUploadAll test.py unused`

Default ignore list: >lua
    {
      '.git', 'requirements.txt', '.ampy', '.micropython', '.vscode',
      '.gitignore', 'project.pymakr', 'env', 'venv', '__pycache__',
      '.python-version', '.micropy/', 'micropy.json', '.idea',
      'README.md', 'LICENSE'
    }
<


PROJECT SETUP                *micropython.nvim-micropython_nvim-project-setup*

Steps to initialize a project:

1. Create a new directory for your project
2. (Optional) Create a virtual environment
3. Run `:MPInit` in the project directory. This creates:
   - `main.py` - starter blink program
   - `.micropython` - configuration file
   - `requirements.txt` - Python dependencies
   - `pyrightconfig.json` - LSP configuration
4. `:MPSetPort` to set the port (or use `auto` for auto-detection)
5. `:MPSetStubs` to set the stubs for your board
6. `pip install -r requirements.txt` to install the required packages

Configuration File ~

The `.micropython` file stores project configuration: >
    PORT=auto
    BAUD=115200
<

Port options:
- `auto` - Auto-detect first USB serial port
- `/dev/ttyUSB0` - Specific port path
- `id:<serial>` - Connect by USB serial number

Live Development with MPSync ~

The `:MPSync` command mounts your local project directory on the device as
`/remote`. This allows you to:

1. Edit files locally
2. Changes are immediately available on device (no upload needed)
3. Import modules from your local directory
4. Rapidly iterate without waiting for uploads

>
    :MPSync        " Mount current directory
    :MPRepl        " Open REPL
    >>> import main  " Run your code
<

Statusline ~

A statusline component shows the current port configuration.

>lua
    require("lualine").setup({
        sections = {
            lualine_b = {
                {
                  require("micropython_nvim").statusline,
                  cond = package.loaded["micropython_nvim"]
                         and require("micropython_nvim").exists,
                },
            }
        }
    })
<


MIGRATION                        *micropython.nvim-micropython_nvim-migration*

This plugin now uses mpremote instead of ampy. If you have existing projects
with `.ampy` configuration files:

1. The plugin will still read `.ampy` files but will show a deprecation warning
2. Run `:MPInit` to create a new `.micropython` configuration
3. Your `.ampy` file can be safely deleted after migration

Key differences:
- No need for rshell - mpremote has built-in REPL
- Auto-detection of devices with `PORT=auto`
- Recursive directory upload with `:MPUploadAll`
- Live development with `:MPSync` (filesystem mounting)

Generated by panvimdoc <https://github.com/kdheepak/panvimdoc>

vim:tw=78:ts=8:noet:ft=help:norl:
